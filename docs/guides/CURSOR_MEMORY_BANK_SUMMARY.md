# Cursor Memory Bank — саммари и применение в КонтентЗавод

Подробный разбор проекта [cursor-memory-bank](https://github.com/vanzan01/cursor-memory-bank) (v0.8) и рекомендации по улучшению взаимодействия с Cursor в нашем проекте.

---

**Статус:** полная интеграция выполнена. В проекте есть папка `memory-bank/`, команды в `.cursor/commands/` (van, plan, creative, build, reflect, archive) и правила в `.cursor/rules/isolation_rules/`. Старт: `/van [описание задачи]`.

---

## 1. О чём этот проект

**Memory Bank System** — это **система управления задачами и контекстом** для Cursor 2.0. Она не заменяет твои правила и не меняет код проекта: она добавляет **структурированный рабочий процесс** и **постоянную память** между сессиями и командами.

Ключевые идеи:

- **Одна точка правды** — всё о текущей задаче хранится в папке `memory-bank/` (задачи, план, прогресс, креативные решения, рефлексия, архив).
- **Команды вместо хаотичного чата** — шесть команд (`/van`, `/plan`, `/creative`, `/build`, `/reflect`, `/archive`) ведут по этапам: от постановки задачи до архива и документации.
- **Экономия токенов** — правила подгружаются иерархически и «лениво»: только то, что нужно для текущего шага (~70% меньше токенов по заявлению автора).
- **Уровни сложности (1–4)** — воронка подстраивается под задачу: быстрый фикс (1) vs большая фича/архитектура (4).

То есть это не «ещё один набор правил», а **каркас процесса**: как мы формулируем задачу, планируем, принимаем дизайн-решения, делаем код, рефлексируем и архивируем.

---

## 2. Шесть команд и что они делают

| Команда | Назначение | Когда использовать |
|--------|------------|---------------------|
| **`/van`** | Инициализация, определение сложности, маршрутизация | Начало новой задачи или проекта |
| **`/plan`** | Детальный план реализации под уровень сложности | После `/van` для уровней 2–4 |
| **`/creative`** | Исследование вариантов дизайна (архитектура, UI/UX, алгоритмы) | Когда план помечает компоненты «требуют креативной фазы» |
| **`/build`** | Реализация по плану и креативным решениям | После плана (и при необходимости после `/creative`) |
| **`/reflect`** | Рефлексия: что получилось, что сложно, уроки | После завершения реализации |
| **`/archive`** | Документирование, архив, сброс контекста для следующей задачи | После рефлексии, чтобы закрыть задачу |

Последовательность по уровням:

- **Level 1 (быстрый фикс):** `/van` → `/build` → `/reflect` → `/archive`
- **Level 2 (простое улучшение):** `/van` → `/plan` → `/build` → `/reflect` → `/archive`
- **Level 3–4 (фича/система):** `/van` → `/plan` → `/creative` → `/build` → `/reflect` → `/archive`

---

## 3. Структура Memory Bank (`memory-bank/`)

Все файлы — в одной папке, чтобы и ты, и AI могли опираться на один и тот же контекст.

### Основные файлы

- **`tasks.md`** — источник правды: задачи, чеклисты, компоненты, статусы, планы.
- **`activeContext.md`** — текущий фокус (что сейчас делаем).
- **`progress.md`** — статус реализации, что сделано, наблюдения.
- **`projectbrief.md`** — краткое описание проекта (основа контекста).
- **`productContext.md`** — продуктовый контекст и требования.
- **`systemPatterns.md`** — паттерны и архитектурные решения.
- **`techContext.md`** — стек и технический контекст.

### Генерируемые в процессе

- **`creative/creative-[feature_name].md`** — документы решений по дизайну (уровни 3–4).
- **`reflection/reflection-[task_id].md`** — рефлексия по задаче.
- **`archive/archive-[task_id].md`** — архив завершённой задачи.

Это и есть «память» между сессиями: следующий раз AI (и ты) читает `tasks.md`, `activeContext.md`, при необходимости — креатив и архив, и продолжает с того же места.

---

## 4. Как это улучшает наше взаимодействие

### 4.1 Чёткий процесс вместо «просто поправь баг»

- **Единый вход** — новая задача всегда начинается с `/van [описание]`. Я буду знать, что это «официальная» задача и нужно обновить Memory Bank.
- **План перед кодом** — для уровней 2–4 обязателен `/plan`. Меньше ситуаций «сделал не то» или «забыли про крайние случаи».
- **Креативная фаза** — для спорных решений (архитектура, API, UX) есть явный этап `/creative` с вариантами и выбором, без перегрузки контекста.

### 4.2 Сохранение контекста между сессиями

- После перерыва или нового чата я смогу прочитать `memory-bank/tasks.md`, `activeContext.md`, `progress.md` и продолжить без потери нити.
- Твои правила проекта (структура, MCP, ключи, запрет ручных шагов) остаются; Memory Bank добавляет **контекст конкретной задачи**.

### 4.3 Рефлексия и архив

- **`/reflect`** — фиксируем, что пошло хорошо, что — нет, какие уроки и улучшения процесса.
- **`/archive`** — одна запись на задачу в `archive/`, обновление `tasks.md` и сброс `activeContext.md`. История задач остаётся в репозитории и может использоваться для онбординга и анализа.

### 4.4 Экономия токенов и предсказуемость

- Подгружаются только правила, нужные для текущей команды и уровня сложности.
- Меньше «всего подряд» в контексте — быстрее ответы и меньше риска упереться в лимит.

### 4.5 Совместимость с нашими правилами

- Memory Bank не подменяет `.cursor/rules/`: у нас остаются project-structure, no-manual-steps, keys-and-tokens, content-factory-mcp, check-mcp-first, model-AI и т.д.
- Можно интегрировать так: команды Memory Bank **ссылаются** на наши правила (или мы дублируем ключевые пункты в своих правилах внутри `.cursor/rules/`), а `memory-bank/` хранит только состояние задач и процесса.

---

## 5. Что нужно для внедрения

### 5.1 Минимальный вариант (только идеи, без клонирования репо)

- Завести в проекте папку **`memory-bank/`** (в корне или, если хочешь соблюсти «ничего в корне», можно обсудить альтернативу в `docs/` с явным указанием в правилах).
- Ввести в правила явное указание: при старте новой задачи — создавать/обновлять `tasks.md`, `activeContext.md`, при завершении — рефлексия и архив (хотя бы в упрощённом виде).
- Опционально: описать в `docs/guides/` наш собственный мини-воркфлоу (аналог van → plan → build → reflect → archive) без обязательного использования команд из репо.

### 5.2 Полная интеграция (команды + правила из репо)

- **Склонировать** [cursor-memory-bank](https://github.com/vanzan01/cursor-memory-bank) во временную папку и перенести в проект:
  - `.cursor/commands/` — все шесть команд (van, plan, creative, build, reflect, archive);
  - `.cursor/rules/isolation_rules/` — иерархические правила (main, memory-bank-paths, по уровням, по фазам).
- Создать **`memory-bank/`** и при первом запуске `/van` инициализировать файлы (tasks.md, activeContext.md, progress.md, projectbrief.md и т.д.).
- **Адаптировать** пути и формулировки под наш проект (например, projectbrief — про КонтентЗавод, блоки, MCP, Дзен и т.д.).
- Убедиться, что наши существующие правила не конфликтуют с isolation_rules (при необходимости объединить или импортировать их в описание команд).

### 5.3 Гибрид (рекомендуемый старт)

- Не клонировать весь репо, а **взять идеи**:
  - Ввести папку **`memory-bank/`** и шаблоны для `tasks.md`, `activeContext.md`, `progress.md`.
  - Добавить **одну-две свои команды** в `.cursor/commands/` (например, «start-task» и «finish-task»), которые будут обновлять эти файлы и напоминать о плане/рефлексии.
  - В **правилах** прописать: при новой задаче — заполнять tasks/activeContext; при завершении — обновлять progress и писать короткую рефлексию/архив в `memory-bank/archive/` или в `docs/`.
- По мере привыкания можно добавлять больше команд или подтянуть полный набор из Memory Bank.

---

## 6. Краткое резюме

| Аспект | Суть |
|--------|------|
| **Что такое Memory Bank** | Система задач + контекста в папке `memory-bank/` и шесть пошаговых команд для Cursor 2.0. |
| **Зачем** | Предсказуемый процесс, сохранение контекста между сессиями, рефлексия и архив, экономия токенов за счёт иерархических правил. |
| **Как может улучшить нас** | Чёткие правила совместной работы (вход через задачу, план, при необходимости креатив, билд, рефлексия, архив) и единое место, откуда я «помню», что мы делаем и что уже сделали. |
| **Следующий шаг** | Выбрать вариант внедрения (минимальный / полный / гибрид) и либо завести `memory-bank/` + обновить правила, либо скопировать команды и правила из репо и адаптировать их под КонтентЗавод. |

Если скажешь, какой вариант тебе ближе (минимальный, полный или гибрид), могу предложить конкретные правки под наш репозиторий: куда положить `memory-bank/`, какие файлы создать, и что дописать в `.cursor/rules/` и в `docs/`.
