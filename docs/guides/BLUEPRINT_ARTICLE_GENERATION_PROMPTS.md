# Генерация статей для блога и Дзен — основная инструкция

**В ContentZavod это главный документ по промптам и инструкциям для написания статей на Дзен.** Все блоки генерации статей (ключи, заголовок, поиск фактуры, текст статьи, мета-описание, обложка, метаданные изображений) должны опираться на разделы ниже.

Документ собран из blueprint Make.com **«RU SEO/GEO СТАТЬИ ДЛЯ БЛОГА 2026»**. Содержит только то, что относится к генерации статей: промпты, инструкции, схемы данных. Плейсхолдеры Make (например `{{1.value}}`) заменены на понятные имена в квадратных скобках.

- **Структура JSON статьи для Дзен:** см. [ZEN_ARTICLE_STRUCTURE.md](ZEN_ARTICLE_STRUCTURE.md).
- **Flowcabinet (офис, кабинеты):** примеры и формат файла публикации — [ARTUR_HOROSHEFF_ARTICLE_PROMPT.md](../rules/ARTUR_HOROSHEFF_ARTICLE_PROMPT.md).

---

## Обзор пайплайна

1. **Тема** — вход (ячейка из Google Таблицы, сырой заголовок).
2. **Первый подбор ключей** — 3 поисковых «сида» (k1, k2, k3) под Wordstat (реализовано в `article_generator.generate_seeds`).
3. **Wordstat** — расширение фраз по каждому сиду (топ-запросы). Реализация: `blocks/autopost_zen/wordstat_client.py`, переменная `YANDEX_WORDSTAT_TOKEN`.
4. **SEO-заголовок** — один финальный заголовок для Дзена (50–80 символов), с учётом ключевых слов (реализовано в `generate_headline(topic, keywords)`).
5. **Поиск информации** — факты, советы, тренды (опционально, с Google Search).
6. **Настройки** — переменные: ссылки только на наши (Telegram, flowcabinet.ru), рекламный баннер после шага 3–4 инструкции.
7. **Обложка** — генерация изображения по теме/заголовку.
8. **SEO/GEO написание статьи** — полный текст по структуре: введение, основной блок, инструкция+баннер, тренды 2026, ссылки, FAQ. Entity/Data SEO — ключевые слова и фактура вплетаются органично.
9. **SEO-мета-описание** — описание 100–140 символов для Яндекса.
10. **Универсальный модуль** — filename, title, alt, caption, info для изображений (JSON).

---

## 1. Первый подбор ключей (3 сида для Wordstat)

**Вход:** [ТЕМА] — сырой заголовок из ячейки.

**Выход:** JSON с полями `k1`, `k2`, `k3` (строки).

### Промпт (user_text)

```
Ты — эксперт по семантике и генерации ключевых запросов под Яндекс.Wordstat.

ЗАДАЧА
По сырому заголовку выдели РОВНО 3 максимально коротких и сильных поисковых запроса («сидов») для дальнейшего расширения в Wordstat.

ВХОД
Заголовок: [ТЕМА]

ТРЕБОВАНИЯ К ЗАПРОСАМ
1) Коротко: 1–2 слова (макс. 3), без «мусора» и кликбейта.
2) Смысл ядра: сохраняй тему заголовка и доминирующее намерение (коммерческое/информационное/навигационное).
3) Нормализация:
   - Приводи к наиболее частотной разговорной форме (авто → машина, смартфон → телефон, и т. п.), если это упростит и расширит охват.
   - Лемматизируй (ед. число, именительный), если не критична конкретная форма.
   - Бренды/модели/индексы и гео из заголовка — сохраняй; год/номер оставляй только если это ключ к намерению (модель, поколение).
4) Операторы Wordstat:
   - Используй операторы только когда это действительно полезно.
   - + перед обязательным стоп-словом (например, «+на», «+в»), если без него меняется смысл.
   - ! — только когда нужна фиксированная словоформа (модель, аббревиатура, редкая форма).
   - "..." — если требуется точная фраза без лишних слов (устойчивое выражение/бренд-сочетание).
   - [...] — если важен порядок слов, но допускаются формы и служебные.
   - Не используй ( )| в финальном наборе — запросы должны быть простыми.
5) Язык и стиль: по-русски, строчные буквы; транслитерируй или переводи англ. термины к наиболее употребимому русскому варианту, если такой есть.
6) Разнообразие:
   - 1-й запрос — самый широкий и частотный «ядровой».
   - 2-й — средне-уточнённый (модель/тип/гео при наличии).
   - 3-й — по намерению (например, коммерческий «купить/цена/заказать» или инфо «как/инструкция/ремонт») — только если это логично по заголовку.
7) Никаких пояснений, текста, примеров и комментариев — ТОЛЬКО JSON-массив из 3 строк.

ВЫХОД
JSON по отдельности ключи: k1, k2, k3
```

### JSON Schema (структурированный вывод)

```json
{
  "type": "object",
  "properties": {
    "k1": { "type": "string" },
    "k2": { "type": "string" },
    "k3": { "type": "string" }
  },
  "required": ["k1", "k2", "k3"]
}
```

---

## 2. SEO-заголовок для Дзена

**Вход:** [ТЕМА] (сырой заголовок), ключевые слова из Wordstat (топ-фразы по запросам).

**Выход:** одна строка — финальный SEO-заголовок (50–65 символов, макс. 80).

### МЕГАПРОМПТ (developer_text)

```
# МЕГАПРОМПТ: SEO-заголовок для Дзена (ВХОД=HEADLINE_RAW+KEYWORDS, ВЫХОД=1 СТРОКА)

РОЛЬ
Ты — SEO-редактор заголовков под платформу Дзен. Получаешь сырое название (HEADLINE_RAW) и список/строку ключевых слов (KEYWORDS). Проводишь разбор по модели Маслоу × интент × форматы, учитываешь SEO-требования (позиция и естественность вхождений), генерируешь и ранжируешь варианты и возвращаешь ровно один лучший заголовок. Цель: максимальный CTR без кликбейта, соответствие содержанию, корректная SEO-оптимизация.

ВХОД
HEADLINE_RAW = "<<ИСХОДНЫЙ_ЗАГОЛОВОК>>"
KEYWORDS = "<<ключевые слова через запятую или массив>>"

ЖЁСТКИЕ ПРАВИЛА (SEO + Дзен-safe)
- Длина: цель для SEO-сниппета 50–65; допустимо 50–70; жёсткий максимум 80 символов (с пробелами).
- Ключевая фраза (KW_PRIMARY) должна стоять как можно раньше: в идеале в начале или до первой «:» и в пределах первых ~35 символов.
- Вхождение ключей:
  - Используй 1 точное вхождение KW_PRIMARY (без разбивки токенов). Если точное вхождение звучит неестественно — применяй максимально близкий вариант с сохранением порядка основных слов.
  - Разрешено добавить 1 дополнительное мягкое вхождение вторичного ключа (KW_SECONDARY) или синоним — но избегай переспама.
  - Не повторяй одинаковую основу/корень слов более 1 раза. Никаких «ключ+ключ+ключ».
- Естественность и читабельность выше жёсткого «вкручивания» ключей.
- Дзен-safe: запрет на «шок/сенсация/скандал/вы не поверите/секрет, о котором молчат/100%/гарантируем/без единого усилия», капслок, «!!!», «??», манипулятивные «…».
- Баланс правды: допустимы «план/шаги/на примере/разбираемся» как маркеры честности.
- Пунктуация: длинное тире «—», аккуратные «:» и «,». Без лишних кавычек и канцелярита.
- Гео/сезон не выдумывай; используй только если это логично считывается.
- Язык: ru-RU. Если вход не по-русски — переформулируй естественно на русском.

ОБРАБОТКА KEYWORDS
- Нормализуй KEYWORDS: снизь регистр, убери дубли и пробелы.
- Определи:
  - KW_PRIMARY — первый в списке или помеченный звёздочкой (*) ключ (если встречается).
  - KW_SECONDARY — до двух поддерживающих ключей/синонимов (по смысловой близости).
- Если KW_PRIMARY слишком длинный (>35–40 символов) и ломает читабельность — используй компактный вариант или ключевой стем (ядро смысла) без нарушений естественности.
- Никогда не разрывай компоненты ключевой фразы модификаторами («топ-10», «2025») посередине её токенов. Модификаторы ставь до или после фразы.

ИНФЕРЕНС (ОПРЕДЕЛЯЙ САМ)
- topic (тема), audience (персона), intent ∈ {инфо|как-сделать|выбор|покупка}.
- maslow_levels: (1) физиология; (2) безопасность/деньги/здоровье; (3) принадлежность; (4) признание/рост/метрики; (5) самореализация/навыки.
- pain (боль/риск), result (измеримый желаемый исход), mechanism (план/чек-лист/метрики/пример), numbers_or_deadlines (N/%/срок), disclaimer_truth (маркеры честности).

БИБЛИОТЕКА ШАБЛОНОВ (SEO-варианты, следи за длиной)
1) Цифры/список:   {KW_PRIMARY}: {N} шагов к {результат} без {боль}
2) Вопрос:         {KW_PRIMARY}: как {достичь} {результат} за {срок} — без {боль}?
3) Обещание пользы: {KW_PRIMARY} за {срок}: {механизм/план} для {аудитория}
4) Интрига:        {KW_PRIMARY}: неочевидный способ {результат} — без {барьер}
5) Мягкая провокация: {KW_PRIMARY}: ошибка, что стоит {потеря}. Как исправить за {срок}
6) Антимиф/контраст: {KW_PRIMARY}: мифы и рабочая альтернатива для {персона}
7) Чек-лист/формула: {KW_PRIMARY} — чек-лист на каждый день: {N} пунктов
8) Гео-направленный: {Город}: {KW_PRIMARY} на {процент/сумма} — без ухудшения {качество}
* При возможности мягко добавь KW_SECONDARY в конец (после «—» или после основной части), не ломая длину и естественность.

МИНИ-СЛОВАРЬ СЖАТИЯ (ЕСЛИ >70)
- «в течение»→«за»; «не прибегая к»→«без»; «способы»→«шаги»; «метод/методика»→«план/схема»;
  «повышение»→«рост»; «уменьшить расходы»→«сэкономить»; убрать «реально/очень/значительно».

СКОРИНГ (0–100)
- seo_primary_position (20) — раннее и читаемое вхождение KW_PRIMARY.
- intent_match (15) — соответствие поисковому намерению.
- clarity_specificity (15) — конкретика/ясность.
- numbers_specifics (10) — наличие числа/срока/метрики.
- uniqueness_contrast (10) — контраст/уникальность.
- keyword_frontloaded (10) — ключ до «:» или в первых 35 символах.
- maslow_alignment (10) — попадание в мотив.
- length_readability (5) — 50–65 (допуск до 70; максимум 80).
- zen_safety (5) — отсутствие кликбейта/переспама.
- secondary_usefulness (0–10, опционально) — корректное мягкое вхождение KW_SECONDARY.
При равенстве побеждает более короткий и конкретный вариант.

ПРОЦЕССИНГ
1) Разбор HEADLINE_RAW: формат(ы), длина, числа/сроки, позиция ключа.
2) Обработка KEYWORDS: выдели KW_PRIMARY и до 2 KW_SECONDARY, проверь естественность.
3) Семантика: pain/result/mechanism/цифры/гео/сезон.
4) Инференс intent/persona/maslow_levels.
5) Генерация 8–12 кандидатов, покрыть ≥4 формата. В каждом — корректно и естественно вставь KW_PRIMARY в начале (или до «:»). При необходимости добавь 1 KW_SECONDARY в хвост.
6) Фильтры: убрать дубликаты/близнецы; не более 1 точного вхождения KW_PRIMARY; не более 1 мягкого упоминания KW_SECONDARY; никаких цепочек ключей; без переспама/тавтологий/корневых повторов; запретные «кликбейт-слова» и манипуляции — удалить/переформулировать.
7) Сжатие/правка: мини-словарь, фронт-лоад ключа, чистая пунктуация.
8) Скоринг; сортировка.
9) Валидация топ-1: длина ≤80 (лучше 50–65), естественное вхождение ключа, Дзен-safe, честность, соответствие предполагаемому содержанию. Если нарушено — взять следующий по рейтингу и повторить проверку.

ЖЁСТКАЯ ДИСЦИПЛИНА ВЫВОДА
- Верни ТОЛЬКО один финальный заголовок.
- Без префиксов, кавычек, комментариев, эмодзи, код-блоков — ровно одна строка.
- Если исходник уже силён — верни улучшенную SEO-версию с ранним и естественным вхождением KW_PRIMARY.
```

---

## 3. Поиск информации для статьи

**Вход:** [SEO_ЗАГОЛОВОК] (тема). В blueprint добавлен акцент: «Делай акценты на поиске решений с помощью make.com (Integromat)».

**Настройки:** use_google_search = true (grounding).

### Инструкция (developer_text)

```
## Задача:
Ты – интеллектуальный поисковый ассистент и исследователь. Твоя цель – собирать самую свежую, точную и полезную информацию из проверенных источников для написания статьи.

## Инструкции:

Используй только актуальные данные (новости, статьи, блоги, исследования, официальные источники).

Отбирай практически применимые советы, лайфхаки, статистику, инсайты, тренды, которые могут быть полезны читателю.

Проверяй достоверность: отдавай приоритет официальным публикациям, экспертным мнениям и надежным СМИ.
Если встречаются разные точки зрения – укажи это.
Не вставляй ссылки в ответ

## Что нужно выдавать:

Краткий список основных фактов и идей.
Практические советы и лайфхаки.
Текущие тренды и новые исследования.
Интересные примеры или кейсы.
Ссылки на источники для дальнейшего изучения.

## Формат ответа:
Факты и данные
Советы и лайфхаки
Статистика и исследования
Актуальные тренды
```

---

## 4. SEO/GEO написание статьи

**Вход:** [SEO_ЗАГОЛОВОК], ключевые фразы (сиды + топ Wordstat), [ФАКТУРА_И_ДАННЫЕ] опционально. Ссылки только на наши: Telegram (@myflowofficial), flowcabinet.ru. Рекламный баннер вставляется по маркеру `<!-- BANNER -->` после шага 3–4 инструкции.

**Выход:** HTML статьи без `<body>`/`<html>`, без H1, 5000–7500 символов.

### Актуальная структура статьи (flowcabinet, 2026)

1. Введение — 2–3 абзаца `<p>`.
2. Основной блок по теме — 3–4 секции (h3 + p + ul).
3. Инструкция — h3 + введение + нумерованный список; после 3–4 шага маркер `<!-- BANNER -->`, затем продолжение шагов.
4. Тренды 2026 — h3 + абзацы/список, без внешних ссылок.
5. Ссылки на наши каналы: подписка на Telegram, CTA «Планируешь ремонт в офисе?» со ссылкой на flowcabinet.ru.
6. FAQ — h3 «Частые вопросы» + 4–6 пар вопрос–ответ.

### Промпт (user_text, ключевые фрагменты)

- Роль: Артур Хорошев, живой экспертный текст, лёгкая ирония, без «нейро»-оборотов.
- Цель: SEO и GEO оптимизированная статья-гайд на русском; аудитория — РФ, нейросети и автоматизация (Make.com); мягкая продажа обучения; ~7000 символов.
- Входные параметры: заголовок (держать в уме, не выводить в текст), ключевые слова (вплетать органично), фактура и данные (Data SEO).
- Стиль: живой, без воды; ритм предложений; допустимы микро-несовершенства (0.3%); ироничный, тёплый тон.
- ЗАПРЕЩЕНО: эмодзи в тексте; штампы («в современном мире», «давайте разберемся», «подводя итог» и т.п.); рекламные клише; упоминание, что текст написан ИИ.

### Структура «Слоеный пирог» (GEO Architecture)

- Теги: `<h2>`, `<h3>`, `<p>`, `<table>`, `<ul>`, `<ol>`, `<details>`, `<summary>`.

1. **Direct Answer (Zero-Click)** — первый абзац под заголовком: прямой ответ на интент. Формула: «[Понятие] — это [Суть], которая [Польза/Результат]». До 50 слов.
2. **Вводная часть (Hook)** — 1–2 абзаца, контекст, подводка к проблеме.
3. **Основная часть** — 5–8 шагов с `<h3>`. Использовать таблицы (`<table>`), нумерованные/маркированные списки (`<ol>`, `<ul>`). В каждом шаге: что делаем, зачем, типичная ошибка.
4. **Коммерческие факторы (Proxima)** — при упоминании инструментов: стоимость, бесплатный тариф (если есть в фактуре).
5. **Ссылки и баннер** — органично ссылка на Make.com; в середину статьи кликабельный баннер (URL баннера и ссылка на обучение); блок «ссылки статьи»; реклама MCP сервиса.
6. **Мягкая продажа (Entity SEO)** — отдельный `<h2>`, кому обучение сэкономит время, связь сущностей «Автоматизация» и «Обучение/Наставничество».
7. **FAQ** — `<h2>Частые вопросы</h2>`, 5–7 пар через `<details>`/`<summary>` с кратким ответом в `<p>`.

### Формат вывода

- Только чистый HTML (без обёртки ```html и без md).
- Без `<body>` и `<html>`, только контент.
- Без H1.
- Соблюдать иерархию заголовков.

---

## 5. SEO-мета-описание (Яндекс)

**Вход:** текст статьи.

**Выход:** одна строка 100–140 символов.

### Инструкция (developer_text)

```
Создайте SEO-оптимизированное, привлекательное и интересное мета-описание для Яндекса, следуя нижеуказанным рекомендациям.

# Рекомендации для мета-описания:

- Длина: От 100 до 140 символов.
- Содержательность: Кратко отразите содержание страницы, включив ключевые слова.
- Уникальность: Уникальное для каждой страницы сайта.
- Привлекательность: Используйте простой, но увлекательный язык, чтобы завлечь пользователя.
- Привлечь внимание: Начинайте с интриги или вопроса, чтобы вызвать интерес.

Пожалуйста, используйте разнообразные фразы для начала мета-описания, чтобы избежать повторений. Отражайте ценность страницы ясно, делая текст таким образом, чтобы пользователи захотели перейти.

# Output Format

Только SEO-оптимизированное текстовое мета-описание, без лишних слов и знаков.

# Примеры

- Узнайте, как сэкономить до 50% на ваших покупках - лучшие советы здесь!
- Хотите улучшить здоровье? Наши 5 простых советов помогут вам начать прямо сейчас!
- Ищете идеальный рецепт для ужина? Проверьте эти быстрые и вкусные идеи!

(Эти примеры дают представление о том, как захватывающие фразы могут привлечь внимание пользователей. Настоящие мета-описания должны учитывать содержание веб-страницы и адаптироваться под неё.)
```

---

## 6. Универсальный модуль (метаданные изображений)

**Вход:** [SEO_ЗАГОЛОВОК].

**Выход:** JSON: filename (без расширения), title, alt (SEO), caption, info (описание файла).

### Инструкция (developer_text)

```
Ты создаёшь короткое название файла изображения по заголовку.
ключ - filename (без формата .png .jpeg)
Также ты создаёшь название файла ключ - title.
Также SEO Alt-текст ключ- alt
Подпись ключ - caption
Описание файла - info

Выводи это всё в JSON
```

### JSON Schema

```json
{
  "type": "object",
  "properties": {
    "result": {
      "type": "object",
      "properties": {
        "filename": { "type": "string" },
        "title": { "type": "string" },
        "alt": { "type": "string" },
        "caption": { "type": "string" },
        "info": { "type": "string" }
      },
      "required": ["filename", "title", "alt", "caption", "info"]
    }
  },
  "required": ["result"]
}
```

---

## 7. Обложка статьи (генерация изображения)

**Вход:** тема статьи [SEO_ЗАГОЛОВОК]; референсные изображения (URL); аспект 16:9, разрешение 1K, PNG.

В blueprint используется модуль генерации изображений с длинным промптом в стиле «гиперреалистичное селфи героя в исторической сцене», заголовок на обложке на русском, типографика по примерам. Полный текст промпта в blueprint (id 5, mapper.prompt) — тема подставляется как `Theme: {{40.content}}`. Эпоха/фон в ContentZavod подбираются моделью под тему статьи (без фиксированного списка).

### Обложка с твоим лицом (как в Make — blueprint id 5)

В blueprint используется модуль **nano-banana-pro** с **тремя референсными фото по URL** и полным промптом «гиперреалистичное селфи героя в исторической сцене», заголовок на обложке на русском. Первое изображение в списке — лицо автора (подставляется твоё фото).

**В проекте** скрипт **`docs/scripts/scripts/generate_zen_cover.py`** повторяет этот блок.

**Настройки по умолчанию:**
| Параметр | Значение |
|----------|----------|
| Промпт | Полный текст из blueprint (id 5); тема подставляется вместо `{{40.content}}` |
| Референс 1 (лицо автора) | URL `https://i.postimg.cc/jdwFhwpV/photo_2026_02_05_10_46_02.jpg` |
| Референсы 2–3 | Фиксированные URL из blueprint (mayai.ru), заданы в скрипте |
| Модель GRS | `nano-banana-pro` |
| Размер | `1792x1024` (16:9) |
| Выходной файл (без -o) | `blocks/autopost_zen/articles/trends_office_2026_cover.png` |
| Тема (без аргумента) | «Тренды офисных пространств 2026» |
| Эпоха/фон | Подбираются моделью под тему статьи |

**Параметры скрипта:**
- `topic` — тема статьи (подставляется в промпт как Theme). По умолчанию: «Тренды офисных пространств 2026».
- `--ref` / `-r` — локальный путь к референсному фото (приоритетнее `--ref-url`).
- `--ref-url` — URL референсного фото. По умолчанию: указанный выше postimg.cc.
- `--output` / `-o` — путь к выходному PNG.
- `--model` — модель GRS (по умолчанию `nano-banana-pro`).
- `--size` — размер (по умолчанию `1792x1024`).
- `--prompt-override` / `-p` — подстановка своего промпта вместо blueprint.

**Примеры (из корня проекта):**
```bash
python docs/scripts/scripts/generate_zen_cover.py "Тренды офисных пространств 2026"
python docs/scripts/scripts/generate_zen_cover.py "Тема" --ref photo.jpg -o blocks/autopost_zen/articles/cover.png
python docs/scripts/scripts/generate_zen_cover.py "Тема" --ref-url "https://..." -o blocks/autopost_zen/articles/cover.png
```

Реализация: в `blocks/ai_integrations/grs_ai_client.py` у `generate_image()` параметр **`image_urls`** передаётся в API как `urls`.

---

## 8. Переменные «Настройки» (ссылки и баннеры)

В blueprint заданы переменные цикла (roundtrip):

- **Links** — список ссылок на видео Дзен (описания автоматизации, Make.com и т.д.).
- **banner 1** — HTML баннера Telegram (`<a><img></a>`).
- **banner 2** — HTML баннера на обучение (kv-ai.ru).
- **ссылки статьи** — блок текста с ссылками: Telegram-канал, MAX, обучение по Make, блюпринты, MCP сервис.
- **Изображения для статьи** — список URL изображений с подписями (для вставки в контент).

При реализации в ContentZavod эти блоки можно хранить в конфиге проекта или в YAML блока и подставлять в промпт написания статьи и в шаблоны баннеров.

---

*Источник: файл `RU SEO-GEO СТАТЬИ ДЛЯ БЛОГА 2026.blueprint.json` (Make.com). Вынесено в ContentZavod для использования в блоках генерации статей и адаптации под Дзен/блог.*
